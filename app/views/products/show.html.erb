<div class="product">
	<div class="row">

		<% image2 = @product.image2.exists? %>
		<% image3 = @product.image3.exists? %>
		<% image4 = @product.image4.exists? %>
		<% image5 = @product.image5.exists? %>

		<div class="col-2">
			<ul class="thumbnails">
				<% if image2 || image3 || image4 || image5 %>
					<li data-target="#product-carousel" data-slide-to="0"><%= image_tag @product.image1.url(:thumb), class: "image1 selected" %></li>
				<% end %>
				<% if image2 %>
					<li data-target="#product-carousel" data-slide-to="1"><%= image_tag @product.image2.url(:thumb), class: "image2" %></li>
				<% end %>
				<% if image3 %>
					<li data-target="#product-carousel" data-slide-to="2"><%= image_tag @product.image3.url(:thumb), class: "image3" %></li>
				<% end %>
				<% if image4 %>
					<li data-target="#product-carousel" data-slide-to="3"><%= image_tag @product.image4.url(:thumb), class: "image4" %></li>
				<% end %>
				<% if image5 %>
					<li data-target="#product-carousel" data-slide-to="4"><%= image_tag @product.image5.url(:thumb), class: "image5" %></li>
				<% end %>
			</ul>
		</div>

		<div class="col-7">
			<div id="product-carousel" class="carousel slide carousel-fade" data-ride="carousel" data-interval="false">

			  <!-- Indicators -->
			  <ol class="carousel-indicators">
			  	<% if image2 || image3 || image4 || image5 %>
				    <li data-target="#product-carousel" data-slide-to="0" class="active"></li>
				  <% end %>
				  <% if image2 %>
				    <li data-target="#product-carousel" data-slide-to="1"></li>
				  <% end %>
				  <% if image3 %>
				    <li data-target="#product-carousel" data-slide-to="2"></li>
				  <% end %>
				  <% if image4 %>
				    <li data-target="#product-carousel" data-slide-to="3"></li>
				  <% end %>
				 	<% if image5 %>
				    <li data-target="#product-carousel" data-slide-to="4"></li>
				  <% end %>
			  </ol>

			  <!-- Wrapper for slides -->
			  <div class="carousel-inner" role="listbox">
			    <div class="item active">
			      <%= image_tag @product.image1.url(:large) %>
			    </div>
			    <% if image2 %>
				    <div class="item">
				    	<%= image_tag @product.image2.url(:large) %>
				    </div>
				   <% end %>
			    <% if image3 %>
				    <div class="item">
				    	<%= image_tag @product.image3.url(:large) %>
				    </div>
				   <% end %>
			    <% if image4 %>
				    <div class="item">
				    	<%= image_tag @product.image4.url(:large) %>
				    </div>
				   <% end %>
			    <% if image5 %>
				    <div class="item">
				    	<%= image_tag @product.image5.url(:large) %>
				    </div>
				   <% end %>
			  </div>
			</div>
		</div>

		<div class="col-3 overview">
			<h3 class="product-show-name"><%= @product.name %></h3>
			<h5><%= @product.maker.company %></h5>
			<br />
			<h5><%= @product.description %></h5>
			<br />
			<h3>$<%= @product.price - @product.rebate %></h3>
			<div class="product-price-reg">Regular price: $<%= @product.price %></div>
			<ul>
				<li>Free shipping</li>
				<li>Available in the U.S.</li>
			</ul>

			<% if user_signed_in? %>
				<%= link_to "Buy now", "#payment", "data-toggle" => "modal", class: "payment-btn" %>
				<%= render "charges/payment_modal" %>
			<% end %>

			<% if user_signed_in? %>
				<% @review = Review.find_by(user_id: current_user.id, product_id: @product.id) %>
				<% if @review != nil %>
					<br /><br />
					<%= link_to "Continue review", review_build_path(:context, review_id: @review.id) %>
				<% end %>
			<% end %>

			<% if maker_signed_in? && @product.maker == current_maker %>
				<h5><%= link_to "Edit product", edit_product_path(@product) %></h5>
      <% end %>
		</div>
	</div>
	<hr>
	<h2>The Story</h2>
	<h4>
		<%= sanitize @product.story %>
	</h4>
	<br />
</div>

<%= render "products/build/product_progress" %>

<div class="form-wrapper">

	<%= simple_form_for @product, url: wizard_path, method: :put do |f| %>

		<div class="form-inputs">
			<ul class="image-upload">
				<li>
					<%= f.input :image1, as: :file %>
					<div class="image-button">
						<i class="fa fa-plus fa-2x" aria-hidden="true"></i>
						<br />
						Primary image
					</div>
				</li>
				<li>
					<%= f.input :image2, as: :file %>
					<div class="image-button">
						<i class="fa fa-plus fa-2x" aria-hidden="true"></i>
						<br />
						Additional image
					</div>
				</li>
				<li>
					<%= f.input :image3, as: :file %>
					<div class="image-button">
						<i class="fa fa-plus fa-2x" aria-hidden="true"></i>
						<br />
						Additional image
					</div>
				</li>
				<li>
					<%= f.input :image4, as: :file %>
					<div class="image-button">
						<i class="fa fa-plus fa-2x" aria-hidden="true"></i>
						<br />
						Additional image
					</div>
				</li>
				<li>
					<%= f.input :image5, as: :file %>
					<div class="image-button">
						<i class="fa fa-plus fa-2x" aria-hidden="true"></i>
						<br />
						Additional image
					</div>
				</li>
			</ul>

			<br />
			<br />
			<br />
			<br />
			<br />
			<br />
			<br />
			<br />
			<br />

			<%= f.input :name, label: "Product name" %>
			<%= f.input :description, label: "One-line description" %>
			<%= f.input :price, label: "Full price" %>
			<%= f.input :rebate %>
			<%= f.input :quantity %>
			<%= f.input :story, :as => :ckeditor, :input_html => { :ckeditor => {:toolbar => 'mini'} } %>
		</div>

		<div class="form-actions">
	    <%= f.button :submit, "Next" %>
	  </div>
	  <div class="previous-step">
	  	<i class="fa fa-arrow-left" aria-hidden="true"></i><%= link_to "Prev", previous_wizard_path %>
	  </div>
	<% end %>
</div>

<script>
	$(function() {
	  $('#product_image1').on('change', function(event) {
	    var files = event.target.files;
	    var image = files[0];
	    console.log(image.size);
	    var reader = new FileReader();
	    reader.onload = function(file) {
	      var img = new Image();
	      console.log(file);
	      img.src = file.target.result;
	      console.log(img);
	      // $('.image-button').html(img);
	      $('.image-button').css("background-image", "url(" + img.src + ")");
	      // $('.image-button').css("background-repeat", "no-repeat");
	      // $('.image-button').css("background-position", "center center");
	      // $('.image-button').css("background-attachment", "fixed");
	      // $('.image-button').css("background-size", "cover");
	    }
	    reader.readAsDataURL(image);
	    console.log(files);
	  });
	});
</script>